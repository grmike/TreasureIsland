<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Остров сокровищ</title>
    <style type="text/css">
    
        #map {width: 100%;}
        #map table {margin: auto;}
        #map table td {width: 50px; height: 50px; border: 1px black solid; }
    </style>
    <script src="jquery-2.0.2.min.js" type="text/javascript"></script>
    <script src="gamemap-1.0.0.js" type="text/javascript"></script>
    <script src="mapfield.behavior-1.0.0.js" type="text/javascript"></script>
    <script src="mapfield.view-1.0.0.js" type="text/javascript"></script>
    <script src="mapfields-1.0.0.js" type="text/javascript"></script>
    <script src="mobjects-1.0.0.js" type="text/javascript"></script>
    <script type="text/javascript">

    
        var currentObject = null;

        $(document).ready(function () {

            $(document).keypress(function (event) {
                if (event.keyCode == 38) {
                    if (currentObject != null) currentObject.move("up");
                }
                else if (event.keyCode == 40) {
                    if (currentObject != null) currentObject.move("down");
                }
                else if (event.keyCode == 37) {
                    if (currentObject != null) currentObject.move("left");
                }
                else if (event.keyCode == 39) {
                    if (currentObject != null) currentObject.move("right");
                }

            });

            var map = new Map();
            map.init();
            map.draw('map');
            map.addEventHandlers();

            var ship, obj, i;
            for (i = 0; i < 6; ++i) {

                ship = new Ship(i);
                map.fields[i * 2][0].addObject(ship);
                //ship.draw();
            }

            currentObject = ship;
            currentObject.select();

            for (i = 0; i < 6; ++i) {

                obj = new Warrior(i+6);
                map.fields[i * 2 + 1][3].addObject(obj);
                //obj.draw();
            }
            obj = new Chucha(20);
            map.fields[5][3].addObject(obj);
            //obj.draw();

            obj = new Chucha(21);
            map.fields[7][10].addObject(obj);
            //obj.draw();

            obj = new Deer(22);
            map.fields[3][8].addObject(obj);
            //obj.draw();

            obj = new Deer(23);
            map.fields[9][3].addObject(obj);
            //obj.draw();

            obj = new OneCoin(24);
            map.fields[2][9].addObject(obj);
            //obj.draw();

            obj = new FourCoins(25);
            map.fields[8][8].addObject(obj);
            //obj.draw();

            obj = new FiveCoins(26);
            map.fields[7][7].addObject(obj);
            //obj.draw();

        });
        
    </script>
</head>
<body>
<h1>Остров сокровищ</h1>
<img />
<div id="map"></div>
<div style="width: 50px; height: 50px; background-color: black;">
<img src="pics/rocks.gif" style="float: left; position: relative; opacity: 0.8;"/>
</div>
<br/>
<br/>
<br/>
<br/>
<img src="pics/sea.gif" style="float: left; position: relative; left: -50px; opacity: 0.5;"/>
</body>
</html>
